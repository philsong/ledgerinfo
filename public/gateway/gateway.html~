<!DOCTYPE html>
<html lang="zh-cn" ng-app="gatewayApp">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Ripple gateway infomation</title>
  <link href="../css/bootstrap.min.css" rel="stylesheet">
	<script src="../js/ripple-gateways.js"></script>
  <script src="../js/ripple-0.9.3.js"></script>
	<script src="../js/ripple-remote.js"></script>

  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="../js/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="../js/bootstrap.min.js"></script>
<style>
	[ng\:cloak], [ng-cloak], .ng-cloak{display:none;}
	.gridhead{
	  font-size:12px;
	  font-weight:bold; 
	  background:gainsboro;
	  color:black
	}
	.gridhead1{
	  background:gainsboro;
	  color:teal
	}
	.gridfooter{
	  background:white;
	}
	.even{background: white;}
	.odd{background: azure;}
	.panel-heading {
		padding: 3px 3px;}
	a[type='text']{color:#333}
</style>
</head>
<body> 
<!--------------------------------------------------------------------->
	<div class="container"  ng-controller="GatewayCtrl" ng-cloak>
		<div class="row">
			<div class="col-md-12">
				<div class="row">
					<div class="col-md-2">Name：{{gateway.name}}</div>
					<div class="col-md-5">Address：<a type='text' href="../account/account.html#{{gateway.address}}" target="_blank">{{gateway.address}}</a></div>
					<div class="col-md-5">Web address：<a href='{{gateway.weburl}}' target='_blank'>{{gateway.weburl}}</a></div>
				</div>
			</div>
		</div>
<!-------------------------------------------------------------------->
		<div class="row">
			<div class="col-md-12">
				<div class="panel panel-info">
	   				<div class="panel-heading">
		  				<div class="row">
							<div class="col-md-10">
								<h3 class="panel-title" style="margin-top:3px">Gateway offer list</h3>
							</div>
							<div class="col-md-2" style="text-align:right">
								<button type="button" id="loadoffersbtn" class="btn btn-xs btn-link" data-loading-text="Loading...">Fresh</button>
								<button type="button" id="showoffersbtn" class="btn btn-xs btn-link" data-toggle="collapse" data-open-text="+" data-target="#offersdiv">-</button>
							</div>
						</div>
	   				</div>
	   				<div class="panel-body" style="max-height: 530px;overflow-y:auto;overflow-x:hidden">
						<div id="offersdiv" class="row ng-cloak collapse in" ng-hide="collapsed">
							<div class="col-md-6" style="border-right: 3px solid #cccccc;">
								<div class="row gridhead">
									<div class="col-md-2">Acount</div>
									<div class="col-md-2" style="text-align:right">{{money.currency}} SUM</div>
									<div class="col-md-2" style="text-align:right">{{goods.currency}} SUM</div>
									<div class="col-md-2" style="text-align:right">{{money.currency}} SIZE</div>
									<div class="col-md-2" style="text-align:right">{{goods.currency}} SIZE</div>
									<div class="col-md-2" style="text-align:center">BID Price</div>
								</div>
								<div class="row gridhead1">
									<div class="col-md-10" style="text-align:left">The latest data Time:{{buyofferstime}}</div>
									<div class="col-md-2 gridhead" style="text-align:center">{{money.currency}}</div>
								</div>  
								<div class="row" ng-repeat="offer in buyoffers|limitTo:pagesize" ng-class="{'even':$even,'odd':$odd}" >
									<div class="col-md-2" data-toggle="tooltip" data-placement="right" title="{{offer.account}}">
										<a type='text' href="../account/account.html#{{offer.account}}" target="_blank">{{offer.account_short}}</a></div>
									<div class="col-md-2" style="text-align:right">{{offer.moneysum}}</div>
									<div class="col-md-2" style="text-align:right">{{offer.goodssum}}</div>
									<div class="col-md-2" style="text-align:right">{{offer.moneysize}}</div>
									<div class="col-md-2" style="text-align:right">{{offer.goodssize}}</div>
									<div class="col-md-2" style="text-align:center">{{offer.price}}</div>
								</div> 
								<div class="row gridfooter">
									<div class="col-md-7" style="text-align:center"  ng-show="restbuyofferssize>0">
										<a href="javascript:void(0)" ng-click="getmore();">Show more offers. Remainder: <span class="badge">{{restbuyofferssize}}</span>...</a>
									</div>
									<div class="col-md-5" style="text-align:center" ng-show="pagesize>20">
										<a href="javascript:void(0)" ng-click="getfirstpage();">Show First page</a>
									</div>
					 			</div>				      
							</div>
							<div class="col-md-6" style="border-right: 3px solid #cccccc;">
								<div class="row gridhead">
									<div class="col-md-2" style="text-align:center">ASK Price</div>
									<div class="col-md-2" style="text-align:right">{{goods.currency}} SIZE</div>
									<div class="col-md-2" style="text-align:right">{{money.currency}} SIZE</div>
									<div class="col-md-2" style="text-align:right">{{goods.currency}} SUM</div>
									<div class="col-md-2" style="text-align:right">{{money.currency}} SUM</div>
									<div class="col-md-2">Acount</div>
							 	</div>
								<div class="row gridhead1">
									<div class="col-md-2 gridhead" style="text-align:center">{{money.currency}}</div>
									<div class="col-md-10" style="text-align:right">The latest data Time:{{saleofferstime}}</div>                
						   		</div>  
								<div class="row" ng-repeat="offer in saleoffers|limitTo:pagesize" ng-class="{'even':$even,'odd':$odd}">
									<div class="col-md-2" style="text-align:center">{{offer.price}}</div>
									<div class="col-md-2" style="text-align:right">{{offer.goodssize}}</div>
									<div class="col-md-2" style="text-align:right">{{offer.moneysize}}</div>
									<div class="col-md-2" style="text-align:right">{{offer.goodssum}}</div>
									<div class="col-md-2" style="text-align:right">{{offer.moneysum}}</div> 
									<div class="col-md-2" data-toggle="tooltip" data-placement="left" title="{{offer.account}}">
										<a type='text' href="../account/account.html#{{offer.account}}" target="_blank">{{offer.account_short}}</a></div>
								</div>
								<div class="row gridfooter">
									<div class="col-md-9" style="text-align:center" ng-show="restsaleofferssize>0">
										<a href="javascript:void(0)" ng-click="getmore();">Show more offers. Remainder:<span class="badge">{{restsaleofferssize}}</span>...</a>
									</div>
									<div class="col-md-3" style="text-align:center" ng-show="restsaleofferssize>0">
										<a href="javascript:void(0)" ng-click="getall();">Show ALL offers</a>
									</div>
					 			</div>
						</div>
	   				</div>				
				</div>
			</div>
		</div>
	</div>
<!---------------------------------------------------------------->


		<div class="row">
			<div class="col-md-12">
				<div class="panel panel-info">
	   				<div class="panel-heading">
		  				<div class="row">
							<div class="col-md-6">
								<h3 class="panel-title" style="margin-top:3px">Trade log</h3>
							</div>
							
							<div class="col-md-6" style="text-align:right">
								<span class="panel-title" class="inline" style="margin-top:3px">Show offer action</span> 
								<div id="onoffofferlog" class="btn-group btn-toggle" ng-click="onoffOfferLog()">									
									<button class="btn btn-xs btn-default" value="true">ON</button>
									<button class="btn btn-xs btn-info active" value="false">OFF</button>
								</div>
							</div>
						</div>

	   				</div>
	   				<div class="panel-body" style="max-height: 200px;overflow-y: auto;">
							<div id="txLoading" class="bold" style="display:none">
									<img src="../img/ripplelogo.png" class="loading">Loading gateway data...
							</div>

						<div class="row" ng-repeat="log in loglist track by $index|limitTo:300">
							<div class="col-md-12"><span>{{log.datetime}}</span><span style="color:{{log.color}};padding-left:20px;">{{log.info}}</span></div>
						</div>
	   				</div>
				</div>
			</div>
		</div>
	</div>
	<!--------------------------------------------------------------------->
	
	
	<script src="../js/angular.js"></script>
	<script src="../js/angular-route.js"></script>
	<script src="../js/rippleok-util.js"></script>
	<script src="js/app.js"></script>
	<script src="js/controllers.js"></script>
  <script src="js/gatewayinfo.js"></script>
<script>
$('#loadoffersbtn').click(function (){
	var $btn=$(this).button('loading');
	loadoffers(function(){$btn.button('reset');});
});

$("#showoffersbtn").click(function(){
  $(this).button('toggle');
  if ($(this).text()==="-"){
		$(this).button('open');
  }else {
  	$(this).button('reset');
  }
});
</script>
</body>
</html>
